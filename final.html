<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src = "./jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .box {
            border : 1px solid gray;
            padding : 10px;
            border-radius : 5px;
        }
        h3 {
            margin-bottom : 0px;

        }
        span {
            border : 1px solid gray;
            padding : 5px;
            margin : 5px;
            border-radius: 5px;
            background-color: magenta;
            
        }

    </style>
    <script>
        //====================================================================================
        function gid(id) {return document.getElementById(id);}
        //====================================================================================
        function keydownHandler() {
            if(event.keyCode == 13) {
                let newItem = document.createElement("span");
                $(newItem).addClass("badge");
                $(newItem).addClass("bg-danger");
                newItem.innerHTML = this.value;
                $(newItem).click(spanClickHandler);
                //--------------------------------------------------------------------------------
                // 삭제 버튼 만들어서 span에 부착하기
                let btn = document.createElement("button");
                btn.innerHTML = "X";
                $(btn).addClass("btn btn-primary btn-sm");
                $(btn).click(btnclickHandler);
                newItem.appendChild(btn);
                
                gid("listToDo").appendChild(newItem);
                this.value = "";

            }
        }
        //====================================================================================
        // click한 버튼을 포함하는 span 객체를(버튼의 부모노드) 삭제한다.
        function btnclickHandler() {
            $(this.parentNode).remove();
        }
        //====================================================================================
        // 클릭한 span 객체를 listDone 객체의 자식노드로 보낸다.(연결한다.)
        function spanClickHandler() {
            let parentID = this.parentNode.getAttribute('id')

            if(parentID == 'listToDo')
                gid("listDone").appendChild(this);
            else
                gid("listToDo").appendChild(this);
        }
        //====================================================================================
        $(document).ready(function() {
            $("span").click(spanClickHandler);
            $("#newItem").keydown(keydownHandler);
        });
        
        //====================================================================================
    </script>
</head>
<body>
    <h1>ToDo List Project</h1>
    <hr>
    New Item : <input type = "text" id = "newItem" size = "30">
    <hr>
    <h3>ToDo List</h3>
    <div class="box" id = "listToDo">
        
    </div>
    <h3>Done List</h3>
    <div class="box" id = "listDone"></div>
</body>
</html>